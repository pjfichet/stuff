#! /bin/sh
# colorae: Parses After Earth color tags.

usage() {
	name=$(basename $0)
	echo "$name: parses After Earth color tags."
	echo "$name <file>: replaces color tags by shell color sequences."
	echo "$name -i <file>: replaces shell color sequences by color tags."
}




shelltotag() {
	# from shell syntax to mud tag syntax
	echo $1
	sed -e "
	s/\[0m/{w/g
	s/\[0;0m/{x/g
	
	s/\[1;30m/{D/g
	s/\[0;31m/{r/g
	s/\[1;31m/{R/g
	s/\[0;32m/{g/g
	s/\[1;32m/{G/g
	s/\[0;33m/{y/g
	s/\[1;33m/{Y/g
	s/\[0;34m/{b/g
	s/\[1;34m/{B/g
	s/\[0;35m/{m/g
	s/\[1;35m/{M/g
	s/\[0;36m/{c/g
	s/\[1;36m/{C/g
	s/\[0;37m/{w/g
	s/\[1;37m/{W/g
	
	s/\[1;40m/}D/g
	s/\[0;41m/}r/g
	s/\[1;41m/}R/g
	s/\[0;42m/}g/g
	s/\[1;42m/}G/g
	s/\[0;43m/}y/g
	s/\[1;43m/}Y/g
	s/\[0;44m/}b/g
	s/\[1;44m/}B/g
	s/\[0;45m/}m/g
	s/\[1;45m/}M/g
	s/\[0;46m/}c/g
	s/\[1;46m/}C/g
	s/\[0;47m/}w/g
	s/\[1;47m/}W/g
	
	s/\[38;5;16m/<aaa>/g
	s/\[38;5;17m/<aab>/g
	s/\[38;5;18m/<aac>/g
	s/\[38;5;19m/<aad>/g
	s/\[38;5;20m/<aae>/g
	s/\[38;5;21m/<aaf>/g
	s/\[38;5;22m/<aba>/g
	s/\[38;5;23m/<abb>/g
	s/\[38;5;24m/<abc>/g
	s/\[38;5;25m/<abd>/g
	s/\[38;5;26m/<abe>/g
	s/\[38;5;27m/<abf>/g
	s/\[38;5;28m/<aca>/g
	s/\[38;5;29m/<acb>/g
	s/\[38;5;30m/<acc>/g
	s/\[38;5;31m/<acd>/g
	s/\[38;5;32m/<ace>/g
	s/\[38;5;33m/<acf>/g
	s/\[38;5;34m/<ada>/g
	s/\[38;5;35m/<adb>/g
	s/\[38;5;36m/<adc>/g
	s/\[38;5;37m/<add>/g
	s/\[38;5;38m/<ade>/g
	s/\[38;5;39m/<adf>/g
	s/\[38;5;40m/<aea>/g
	s/\[38;5;41m/<aeb>/g
	s/\[38;5;42m/<aec>/g
	s/\[38;5;43m/<aed>/g
	s/\[38;5;44m/<aee>/g
	s/\[38;5;45m/<aef>/g
	s/\[38;5;46m/<afa>/g
	s/\[38;5;47m/<afb>/g
	s/\[38;5;48m/<afc>/g
	s/\[38;5;49m/<afd>/g
	s/\[38;5;50m/<afe>/g
	s/\[38;5;51m/<aff>/g
	s/\[38;5;52m/<baa>/g
	s/\[38;5;53m/<bab>/g
	s/\[38;5;54m/<bac>/g
	s/\[38;5;55m/<bad>/g
	s/\[38;5;56m/<bae>/g
	s/\[38;5;57m/<baf>/g
	s/\[38;5;58m/<bba>/g
	s/\[38;5;59m/<bbb>/g
	s/\[38;5;60m/<bbc>/g
	s/\[38;5;61m/<bbd>/g
	s/\[38;5;62m/<bbe>/g
	s/\[38;5;63m/<bbf>/g
	s/\[38;5;64m/<bca>/g
	s/\[38;5;65m/<bcb>/g
	s/\[38;5;66m/<bcc>/g
	s/\[38;5;67m/<bcd>/g
	s/\[38;5;68m/<bce>/g
	s/\[38;5;69m/<bcf>/g
	s/\[38;5;70m/<bda>/g
	s/\[38;5;71m/<bdb>/g
	s/\[38;5;72m/<bdc>/g
	s/\[38;5;73m/<bdd>/g
	s/\[38;5;74m/<bde>/g
	s/\[38;5;75m/<bdf>/g
	s/\[38;5;76m/<bea>/g
	s/\[38;5;77m/<beb>/g
	s/\[38;5;78m/<bec>/g
	s/\[38;5;79m/<bed>/g
	s/\[38;5;80m/<bee>/g
	s/\[38;5;81m/<bef>/g
	s/\[38;5;82m/<bfa>/g
	s/\[38;5;83m/<bfb>/g
	s/\[38;5;84m/<bfc>/g
	s/\[38;5;85m/<bfd>/g
	s/\[38;5;86m/<bfe>/g
	s/\[38;5;87m/<bff>/g
	s/\[38;5;88m/<caa>/g
	s/\[38;5;89m/<cab>/g
	s/\[38;5;90m/<cac>/g
	s/\[38;5;91m/<cad>/g
	s/\[38;5;92m/<cae>/g
	s/\[38;5;93m/<caf>/g
	s/\[38;5;94m/<cba>/g
	s/\[38;5;95m/<cbb>/g
	s/\[38;5;96m/<cbc>/g
	s/\[38;5;97m/<cbd>/g
	s/\[38;5;98m/<cbe>/g
	s/\[38;5;99m/<cbf>/g
	s/\[38;5;100m/<cca>/g
	s/\[38;5;101m/<ccb>/g
	s/\[38;5;102m/<ccc>/g
	s/\[38;5;103m/<ccd>/g
	s/\[38;5;104m/<cce>/g
	s/\[38;5;105m/<ccf>/g
	s/\[38;5;106m/<cda>/g
	s/\[38;5;107m/<cdb>/g
	s/\[38;5;108m/<cdc>/g
	s/\[38;5;109m/<cdd>/g
	s/\[38;5;110m/<cde>/g
	s/\[38;5;111m/<cdf>/g
	s/\[38;5;112m/<cea>/g
	s/\[38;5;113m/<ceb>/g
	s/\[38;5;114m/<cec>/g
	s/\[38;5;115m/<ced>/g
	s/\[38;5;116m/<cee>/g
	s/\[38;5;117m/<cef>/g
	s/\[38;5;118m/<cfa>/g
	s/\[38;5;119m/<cfb>/g
	s/\[38;5;120m/<cfc>/g
	s/\[38;5;121m/<cfd>/g
	s/\[38;5;122m/<cfe>/g
	s/\[38;5;123m/<cff>/g
	s/\[38;5;124m/<daa>/g
	s/\[38;5;125m/<dab>/g
	s/\[38;5;126m/<dac>/g
	s/\[38;5;127m/<dad>/g
	s/\[38;5;128m/<dae>/g
	s/\[38;5;129m/<daf>/g
	s/\[38;5;130m/<dba>/g
	s/\[38;5;131m/<dbb>/g
	s/\[38;5;132m/<dbc>/g
	s/\[38;5;133m/<dbd>/g
	s/\[38;5;134m/<dbe>/g
	s/\[38;5;135m/<dbf>/g
	s/\[38;5;136m/<dca>/g
	s/\[38;5;137m/<dcb>/g
	s/\[38;5;138m/<dcc>/g
	s/\[38;5;139m/<dcd>/g
	s/\[38;5;140m/<dce>/g
	s/\[38;5;141m/<dcf>/g
	s/\[38;5;142m/<dda>/g
	s/\[38;5;143m/<ddb>/g
	s/\[38;5;144m/<ddc>/g
	s/\[38;5;145m/<ddd>/g
	s/\[38;5;146m/<dde>/g
	s/\[38;5;147m/<ddf>/g
	s/\[38;5;148m/<dea>/g
	s/\[38;5;149m/<deb>/g
	s/\[38;5;150m/<dec>/g
	s/\[38;5;151m/<ded>/g
	s/\[38;5;152m/<dee>/g
	s/\[38;5;153m/<def>/g
	s/\[38;5;154m/<dfa>/g
	s/\[38;5;155m/<dfb>/g
	s/\[38;5;156m/<dfc>/g
	s/\[38;5;157m/<dfd>/g
	s/\[38;5;158m/<dfe>/g
	s/\[38;5;159m/<dff>/g
	s/\[38;5;160m/<eaa>/g
	s/\[38;5;161m/<eab>/g
	s/\[38;5;162m/<eac>/g
	s/\[38;5;163m/<ead>/g
	s/\[38;5;164m/<eae>/g
	s/\[38;5;165m/<eaf>/g
	s/\[38;5;166m/<eba>/g
	s/\[38;5;167m/<ebb>/g
	s/\[38;5;168m/<ebc>/g
	s/\[38;5;169m/<ebd>/g
	s/\[38;5;170m/<ebe>/g
	s/\[38;5;171m/<ebf>/g
	s/\[38;5;172m/<eca>/g
	s/\[38;5;173m/<ecb>/g
	s/\[38;5;174m/<ecc>/g
	s/\[38;5;175m/<ecd>/g
	s/\[38;5;176m/<ece>/g
	s/\[38;5;177m/<ecf>/g
	s/\[38;5;178m/<eda>/g
	s/\[38;5;179m/<edb>/g
	s/\[38;5;180m/<edc>/g
	s/\[38;5;181m/<edd>/g
	s/\[38;5;182m/<ede>/g
	s/\[38;5;183m/<edf>/g
	s/\[38;5;184m/<eea>/g
	s/\[38;5;185m/<eeb>/g
	s/\[38;5;186m/<eec>/g
	s/\[38;5;187m/<eed>/g
	s/\[38;5;188m/<eee>/g
	s/\[38;5;189m/<eef>/g
	s/\[38;5;190m/<efa>/g
	s/\[38;5;191m/<efb>/g
	s/\[38;5;192m/<efc>/g
	s/\[38;5;193m/<efd>/g
	s/\[38;5;194m/<efe>/g
	s/\[38;5;195m/<eff>/g
	s/\[38;5;196m/<faa>/g
	s/\[38;5;197m/<fab>/g
	s/\[38;5;198m/<fac>/g
	s/\[38;5;199m/<fad>/g
	s/\[38;5;200m/<fae>/g
	s/\[38;5;201m/<faf>/g
	s/\[38;5;202m/<fba>/g
	s/\[38;5;203m/<fbb>/g
	s/\[38;5;204m/<fbc>/g
	s/\[38;5;205m/<fbd>/g
	s/\[38;5;206m/<fbe>/g
	s/\[38;5;207m/<fbf>/g
	s/\[38;5;208m/<fca>/g
	s/\[38;5;209m/<fcb>/g
	s/\[38;5;210m/<fcc>/g
	s/\[38;5;211m/<fcd>/g
	s/\[38;5;212m/<fce>/g
	s/\[38;5;213m/<fcf>/g
	s/\[38;5;214m/<fda>/g
	s/\[38;5;215m/<fdb>/g
	s/\[38;5;216m/<fdc>/g
	s/\[38;5;217m/<fdd>/g
	s/\[38;5;218m/<fde>/g
	s/\[38;5;219m/<fdf>/g
	s/\[38;5;220m/<fea>/g
	s/\[38;5;221m/<feb>/g
	s/\[38;5;222m/<fec>/g
	s/\[38;5;223m/<fed>/g
	s/\[38;5;224m/<fee>/g
	s/\[38;5;225m/<fef>/g
	s/\[38;5;226m/<ffa>/g
	s/\[38;5;227m/<ffb>/g
	s/\[38;5;228m/<ffc>/g
	s/\[38;5;229m/<ffd>/g
	s/\[38;5;230m/<ffe>/g
	s/\[38;5;231m/<fff>/g
	" $1
}

tagtoshell() {
	# from mud tag syntax to shell syntax
	sed -e "
	s/{{/ACCOLADE/g
	s/{x/[0;0m/g
	
	s/{D/[1;30m/g
	s/{r/[0;31m/g
	s/{R/[1;31m/g
	s/{g/[0;32m/g
	s/{G/[1;32m/g
	s/{y/[0;33m/g
	s/{Y/[1;33m/g
	s/{b/[0;34m/g
	s/{B/[1;34m/g
	s/{m/[0;35m/g
	s/{M/[1;35m/g
	s/{c/[0;36m/g
	s/{C/[1;36m/g
	s/{w/[0;37m/g
	s/{W/[1;37m/g
	
	s/}D/[1;40m/g
	s/}r/[0;41m/g
	s/}R/[1;41m/g
	s/}g/[0;42m/g
	s/}G/[1;42m/g
	s/}y/[0;43m/g
	s/}Y/[1;43m/g
	s/}b/[0;44m/g
	s/}B/[1;44m/g
	s/}m/[0;45m/g
	s/}M/[1;45m/g
	s/}c/[0;46m/g
	s/}C/[1;46m/g
	s/}w/[0;47m/g
	s/}W/[1;47m/g
	
	s/{Z//g
	s/{}/}/g
	s/ACCOLADE/{/g
	s/{\//\n/g
	s,\\\\\\\\,\\\\,g
	/^#/d
	
	s/<aaa>/\[38;5;16m/g
	s/<aab>/\[38;5;17m/g
	s/<aac>/\[38;5;18m/g
	s/<aad>/\[38;5;19m/g
	s/<aae>/\[38;5;20m/g
	s/<aaf>/\[38;5;21m/g
	s/<aba>/\[38;5;22m/g
	s/<abb>/\[38;5;23m/g
	s/<abc>/\[38;5;24m/g
	s/<abd>/\[38;5;25m/g
	s/<abe>/\[38;5;26m/g
	s/<abf>/\[38;5;27m/g
	s/<aca>/\[38;5;28m/g
	s/<acb>/\[38;5;29m/g
	s/<acc>/\[38;5;30m/g
	s/<acd>/\[38;5;31m/g
	s/<ace>/\[38;5;32m/g
	s/<acf>/\[38;5;33m/g
	s/<ada>/\[38;5;34m/g
	s/<adb>/\[38;5;35m/g
	s/<adc>/\[38;5;36m/g
	s/<add>/\[38;5;37m/g
	s/<ade>/\[38;5;38m/g
	s/<adf>/\[38;5;39m/g
	s/<aea>/\[38;5;40m/g
	s/<aeb>/\[38;5;41m/g
	s/<aec>/\[38;5;42m/g
	s/<aed>/\[38;5;43m/g
	s/<aee>/\[38;5;44m/g
	s/<aef>/\[38;5;45m/g
	s/<afa>/\[38;5;46m/g
	s/<afb>/\[38;5;47m/g
	s/<afc>/\[38;5;48m/g
	s/<afd>/\[38;5;49m/g
	s/<afe>/\[38;5;50m/g
	s/<aff>/\[38;5;51m/g
	s/<baa>/\[38;5;52m/g
	s/<bab>/\[38;5;53m/g
	s/<bac>/\[38;5;54m/g
	s/<bad>/\[38;5;55m/g
	s/<bae>/\[38;5;56m/g
	s/<baf>/\[38;5;57m/g
	s/<bba>/\[38;5;58m/g
	s/<bbb>/\[38;5;59m/g
	s/<bbc>/\[38;5;60m/g
	s/<bbd>/\[38;5;61m/g
	s/<bbe>/\[38;5;62m/g
	s/<bbf>/\[38;5;63m/g
	s/<bca>/\[38;5;64m/g
	s/<bcb>/\[38;5;65m/g
	s/<bcc>/\[38;5;66m/g
	s/<bcd>/\[38;5;67m/g
	s/<bce>/\[38;5;68m/g
	s/<bcf>/\[38;5;69m/g
	s/<bda>/\[38;5;70m/g
	s/<bdb>/\[38;5;71m/g
	s/<bdc>/\[38;5;72m/g
	s/<bdd>/\[38;5;73m/g
	s/<bde>/\[38;5;74m/g
	s/<bdf>/\[38;5;75m/g
	s/<bea>/\[38;5;76m/g
	s/<beb>/\[38;5;77m/g
	s/<bec>/\[38;5;78m/g
	s/<bed>/\[38;5;79m/g
	s/<bee>/\[38;5;80m/g
	s/<bef>/\[38;5;81m/g
	s/<bfa>/\[38;5;82m/g
	s/<bfb>/\[38;5;83m/g
	s/<bfc>/\[38;5;84m/g
	s/<bfd>/\[38;5;85m/g
	s/<bfe>/\[38;5;86m/g
	s/<bff>/\[38;5;87m/g
	s/<caa>/\[38;5;88m/g
	s/<cab>/\[38;5;89m/g
	s/<cac>/\[38;5;90m/g
	s/<cad>/\[38;5;91m/g
	s/<cae>/\[38;5;92m/g
	s/<caf>/\[38;5;93m/g
	s/<cba>/\[38;5;94m/g
	s/<cbb>/\[38;5;95m/g
	s/<cbc>/\[38;5;96m/g
	s/<cbd>/\[38;5;97m/g
	s/<cbe>/\[38;5;98m/g
	s/<cbf>/\[38;5;99m/g
	s/<cca>/\[38;5;100m/g
	s/<ccb>/\[38;5;101m/g
	s/<ccc>/\[38;5;102m/g
	s/<ccd>/\[38;5;103m/g
	s/<cce>/\[38;5;104m/g
	s/<ccf>/\[38;5;105m/g
	s/<cda>/\[38;5;106m/g
	s/<cdb>/\[38;5;107m/g
	s/<cdc>/\[38;5;108m/g
	s/<cdd>/\[38;5;109m/g
	s/<cde>/\[38;5;110m/g
	s/<cdf>/\[38;5;111m/g
	s/<cea>/\[38;5;112m/g
	s/<ceb>/\[38;5;113m/g
	s/<cec>/\[38;5;114m/g
	s/<ced>/\[38;5;115m/g
	s/<cee>/\[38;5;116m/g
	s/<cef>/\[38;5;117m/g
	s/<cfa>/\[38;5;118m/g
	s/<cfb>/\[38;5;119m/g
	s/<cfc>/\[38;5;120m/g
	s/<cfd>/\[38;5;121m/g
	s/<cfe>/\[38;5;122m/g
	s/<cff>/\[38;5;123m/g
	s/<daa>/\[38;5;124m/g
	s/<dab>/\[38;5;125m/g
	s/<dac>/\[38;5;126m/g
	s/<dad>/\[38;5;127m/g
	s/<dae>/\[38;5;128m/g
	s/<daf>/\[38;5;129m/g
	s/<dba>/\[38;5;130m/g
	s/<dbb>/\[38;5;131m/g
	s/<dbc>/\[38;5;132m/g
	s/<dbd>/\[38;5;133m/g
	s/<dbe>/\[38;5;134m/g
	s/<dbf>/\[38;5;135m/g
	s/<dca>/\[38;5;136m/g
	s/<dcb>/\[38;5;137m/g
	s/<dcc>/\[38;5;138m/g
	s/<dcd>/\[38;5;139m/g
	s/<dce>/\[38;5;140m/g
	s/<dcf>/\[38;5;141m/g
	s/<dda>/\[38;5;142m/g
	s/<ddb>/\[38;5;143m/g
	s/<ddc>/\[38;5;144m/g
	s/<ddd>/\[38;5;145m/g
	s/<dde>/\[38;5;146m/g
	s/<ddf>/\[38;5;147m/g
	s/<dea>/\[38;5;148m/g
	s/<deb>/\[38;5;149m/g
	s/<dec>/\[38;5;150m/g
	s/<ded>/\[38;5;151m/g
	s/<dee>/\[38;5;152m/g
	s/<def>/\[38;5;153m/g
	s/<dfa>/\[38;5;154m/g
	s/<dfb>/\[38;5;155m/g
	s/<dfc>/\[38;5;156m/g
	s/<dfd>/\[38;5;157m/g
	s/<dfe>/\[38;5;158m/g
	s/<dff>/\[38;5;159m/g
	s/<eaa>/\[38;5;160m/g
	s/<eab>/\[38;5;161m/g
	s/<eac>/\[38;5;162m/g
	s/<ead>/\[38;5;163m/g
	s/<eae>/\[38;5;164m/g
	s/<eaf>/\[38;5;165m/g
	s/<eba>/\[38;5;166m/g
	s/<ebb>/\[38;5;167m/g
	s/<ebc>/\[38;5;168m/g
	s/<ebd>/\[38;5;169m/g
	s/<ebe>/\[38;5;170m/g
	s/<ebf>/\[38;5;171m/g
	s/<eca>/\[38;5;172m/g
	s/<ecb>/\[38;5;173m/g
	s/<ecc>/\[38;5;174m/g
	s/<ecd>/\[38;5;175m/g
	s/<ece>/\[38;5;176m/g
	s/<ecf>/\[38;5;177m/g
	s/<eda>/\[38;5;178m/g
	s/<edb>/\[38;5;179m/g
	s/<edc>/\[38;5;180m/g
	s/<edd>/\[38;5;181m/g
	s/<ede>/\[38;5;182m/g
	s/<edf>/\[38;5;183m/g
	s/<eea>/\[38;5;184m/g
	s/<eeb>/\[38;5;185m/g
	s/<eec>/\[38;5;186m/g
	s/<eed>/\[38;5;187m/g
	s/<eee>/\[38;5;188m/g
	s/<eef>/\[38;5;189m/g
	s/<efa>/\[38;5;190m/g
	s/<efb>/\[38;5;191m/g
	s/<efc>/\[38;5;192m/g
	s/<efd>/\[38;5;193m/g
	s/<efe>/\[38;5;194m/g
	s/<eff>/\[38;5;195m/g
	s/<faa>/\[38;5;196m/g
	s/<fab>/\[38;5;197m/g
	s/<fac>/\[38;5;198m/g
	s/<fad>/\[38;5;199m/g
	s/<fae>/\[38;5;200m/g
	s/<faf>/\[38;5;201m/g
	s/<fba>/\[38;5;202m/g
	s/<fbb>/\[38;5;203m/g
	s/<fbc>/\[38;5;204m/g
	s/<fbd>/\[38;5;205m/g
	s/<fbe>/\[38;5;206m/g
	s/<fbf>/\[38;5;207m/g
	s/<fca>/\[38;5;208m/g
	s/<fcb>/\[38;5;209m/g
	s/<fcc>/\[38;5;210m/g
	s/<fcd>/\[38;5;211m/g
	s/<fce>/\[38;5;212m/g
	s/<fcf>/\[38;5;213m/g
	s/<fda>/\[38;5;214m/g
	s/<fdb>/\[38;5;215m/g
	s/<fdc>/\[38;5;216m/g
	s/<fdd>/\[38;5;217m/g
	s/<fde>/\[38;5;218m/g
	s/<fdf>/\[38;5;219m/g
	s/<fea>/\[38;5;220m/g
	s/<feb>/\[38;5;221m/g
	s/<fec>/\[38;5;222m/g
	s/<fed>/\[38;5;223m/g
	s/<fee>/\[38;5;224m/g
	s/<fef>/\[38;5;225m/g
	s/<ffa>/\[38;5;226m/g
	s/<ffb>/\[38;5;227m/g
	s/<ffc>/\[38;5;228m/g
	s/<ffd>/\[38;5;229m/g
	s/<ffe>/\[38;5;230m/g
	s/<fff>/\[38;5;231m/g
	" $1
}

if [ "$1" = "-i" ]; then
	shelltotag $2
elif [ "$1" = "-h" ] || [ "$1" = "--help" ]; then
	usage
else
	tagtoshell $1
fi
